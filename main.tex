\documentclass[10pt,twocolumn]{article}
\usepackage[utf8]{inputenc}

% Fix section numbering format - explicit control of how section numbers appear
\renewcommand{\thesubsection}{\thesection.\arabic{subsection}}
\usepackage{amsmath,amssymb}
\usepackage{graphicx}
\usepackage{xcolor}
\usepackage{tikz}
\usepackage{pgfplots}
\pgfplotsset{compat=1.18}
\usetikzlibrary{petri,positioning,arrows,automata,decorations.pathreplacing,shapes}

% Improved URL and bibliography handling
\usepackage[hyphens,spaces,obeyspaces]{xurl}  % Better URL breaking

% Load hyperref with specific settings to fix section numbering in bookmarks
\usepackage[bookmarksnumbered,pdfstartview=FitH,hypertexnames=false]{hyperref}

% Configure hyperref for better URL breaking and appearance
\hypersetup{
    breaklinks=true,
    colorlinks=true,
    linkcolor=blue,
    urlcolor=blue,
    citecolor=blue,
    urlbordercolor={0 1 1},  % Cyan border around URLs (can remove if not needed)
    linkbordercolor=blue,    % Border color around links
    pdfborderstyle={/S/U/W 1} % Underline style for links (instead of border)
}

% Better URL breaking and formatting
\urlstyle{sf}  % Use sans-serif font for URLs
\def\UrlBreaks{%
  \do\a\do\b\do\c\do\d\do\e\do\f\do\g\do\h\do\i\do\j\do\k\do\l\do\m%
  \do\n\do\o\do\p\do\q\do\r\do\s\do\t\do\u\do\v\do\w\do\x\do\y\do\z%
  \do\A\do\B\do\C\do\D\do\E\do\F\do\G\do\H\do\I\do\J\do\K\do\L\do\M%
  \do\N\do\O\do\P\do\Q\do\R\do\S\do\T\do\U\do\V\do\W\do\X\do\Y\do\Z%
  \do0\do1\do2\do3\do4\do5\do6\do7\do8\do9\do.\do-\do_\do/\do!\do?\do\%
}
\usepackage{listings}

% Custom code listing style for smaller font and line breaks
\lstdefinestyle{gasingcode}{
  breaklines=true,
  basicstyle=\footnotesize\ttfamily,
  columns=fullflexible,
  keepspaces=true,
  frame=single,
  numbers=left,
  numberstyle=\tiny,
  xleftmargin=1.5em,
  xrightmargin=0.5em,
  aboveskip=0.5em,
  belowskip=0.5em
}

% Set default style for all listings
\lstset{style=gasingcode}
\usepackage{booktabs}
\usepackage{float}
\usepackage{enumitem}

% Simple approach for left margin watermark
\usepackage{rotating}
\usepackage{eso-pic}
\usepackage{color}

% Define a simple, reliable left margin watermark
\AddToShipoutPictureBG{%
  \AtTextLowerLeft{%
    \makebox[0pt][r]{%
      \begin{minipage}[b]{1cm}%
        \begin{turn}{90}%
          \textcolor{black!40}{\fontsize{12pt}{14pt}\selectfont\bfseries\strut\quad arXiv:2025.12345v2 [cs.CL] \today\strut}%
        \end{turn}%
      \end{minipage}%
      \hspace{5mm}%
    }%
  }%
}

% Watermark for draft version
\usepackage{draftwatermark}
\SetWatermarkText{DRAFT VERSION 0.1.91}
\SetWatermarkScale{0}
\SetWatermarkColor[gray]{0.85}

% Define our own styles for diagrams
\tikzset{
    operation/.style={
        rectangle,
        draw=black,
        thick,
        fill=blue!10,
        minimum height=1cm,
        minimum width=2.5cm,
        text centered
    }
}

% Load Spivak/Fong TikZ wiring diagram macros
\input{figures/spivak_fong_wd_macros.tex}

% Load arxiv.sty LAST to override previous settings
\usepackage{arxiv}

% Custom title settings - set format for arXiv style
\renewcommand{\shorttitle}{GASing Arithmetic}
\renewcommand{\undertitle}{A Preprint}
\renewcommand{\headeright}{arXiv:2025.12345v1}

% Use simple header/footer settings
\pagestyle{fancy}
\fancyhf{} % Clear all header/footer fields
\fancyfoot[C]{\thepage} % Page number in center footer
\fancyhead[C]{\shorttitle} % Short title in center header
\fancyhead[R]{\headeright} % arXiv ID in right header
\renewcommand{\headrulewidth}{0.4pt} % Line under the header

\begin{document}

% Left margin watermark is applied through fancyhdr

% Custom title page with author information
\twocolumn[{
  \begin{@twocolumnfalse}
    \vspace*{-10pt}
    \begin{center}
      {\LARGE\bfseries Pattern-Aware, Addition-Based Computation for Next-Generation AI}\par
      \vspace{1.5em}
      % Display author information directly
      {\large Yohanes Surya}\par
      {\small\itshape AI Toba Project, IT Del}\par
      {\small\itshape Toba, Indonesia}\par
      {\small\itshape yohanes.surya@del.ac.id}\par
    \end{center}
    \vspace{10pt}
    \hrule
    \vspace{12pt}
  \end{@twocolumnfalse}
}]

% Enable page numbering
\pagestyle{plain}
\pagenumbering{arabic}

% Set column separation for better readability
\setlength{\columnsep}{0.5in}

% GASing Arithmetic: Enhanced Section Structure
\section*{Abstract}
\input{sections/abstract}

\section{Introduction}
\input{sections/introduction}

\section{Foundational Principles}
\input{sections/foundational_principles}

\section{GASing Implementation and Algorithms}
\input{sections/gasing_implementation_and_algorithms}

\section{Performance Benchmarking}
\input{sections/performance_benchmarking}

\section{Computational Advantages}
\input{sections/computational_advantages}

\section{Pedagogical Applications}
\input{sections/pedagogical_applications}

\section{Future Directions and Discussion}
\input{sections/future_directions_and_discussion}

\section{Conclusion}
\input{sections/conclusion}

% Appendix section
\appendix
\input{sections/appendix}


% Old section inclusions are commented out for reference
% \input{sections/background}
% \input{sections/methodology}
% \input{sections/results}
% \input{sections/discussion}

% Bibliography
\nocite{*}

% Custom bibliography formatting for better wrapping of long references
\makeatletter
\def\url@leostyle{\@ifundefined{selectfont}{\def\UrlFont{\sf}}{\def\UrlFont{\small\ttfamily}}}
\makeatother
\urlstyle{leo}

% Adjust the maximum width for URLs in bibliography
\Urlmuskip=0mu plus 3mu

% Add more flexibility to where LaTeX can break lines in bibliography
\sloppy
\emergencystretch=2em

% Use IEEEtran style with our custom settings
\bibliographystyle{IEEEtran}
\bibliography{bibliography}

\end{document}
